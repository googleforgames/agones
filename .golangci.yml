---
# This file contains all available configuration options
# with their default values.
# options for analysis running
run:
  # default concurrency is a available CPU number
  concurrency: 4

  # timeout for analysis, e.g. 30s, 5m, default is 1m
  deadline: 5m

  # exit code when at least one issue was found, default is 1
  issues-exit-code: 1

  # include test files or not, default is true
  tests: true

  # list of build tags, all linters use it. Default is empty list.
  build-tags:

  # which files to skip: they will be analyzed, but issues from them
  # won't be reported. Default value is empty list, but there is
  # no need to include all autogenerated files, we confidently recognize
  # autogenerated files. If it's not please let us know.
  skip-files:
  modules-download-mode: vendor
# output configuration options
output:
  # the formats used to render issues
  # formats: colored-line-number, line-number, json, colored-tab,
  #          tab, html, checkstyle, code-climate, junit-xml,
  #          junit-xml-extended, github-actions, teamcity, sarif
  # output path can be either `stdout`, `stderr`
  # or path to the file to write to
  formats:
    - format: colored-line-number
      path: stdout

  # print lines of code with issue, default is true
  print-issued-lines: true

  # print linter name in the end of issue text, default is true
  print-linter-name: true
linters:
  enable:
    - bodyclose
    - copyloopvar
    - dupl
    - goconst
    - gocritic
    - gocyclo
    - goimports
    - gosimple
    - govet
    - misspell
    - nakedret
    - revive
    - staticcheck
    - unconvert
    - unparam
    - unused
linters-settings:
  govet:
    disable-all: false
    enable-all: true
    disable:
      # extremely noisy, also against common Go style in most cases
      - shadow
  gocritic:
    enabled-tags: [performance, opinionated, diagnostic]
    disabled-checks: [paramTypeCombine, unnamedResult, unnecessaryDefer]
    settings:  # settings passed to gocritic
      hugeParam:
        sizeThreshold: 512
      rangeValCopy:
        sizeThreshold: 512
        skipTestFuncs: true
issues:
  # This turns off the default excludes - which was causing the linter
  # to miss things like erroneous comments
  exclude-use-default: false
  exclude: [Using the variable on range scope .* in function literal]
  exclude-rules:
    # Skip fieldalignment checks on:
    # - tests: memory footprint doesn't matter
    # - cmd/: we assume these are one-off config entries
    # - pkg/apis: Keep strong convention on TypeMeta/ObjectMeta/Spec/Status
    - path: (.+)_test\.go|^test/|^cmd/.*|^pkg/apis/.*
      # fieldalignment is in the `govet` linter, so exclude based on text instead of all of govet
      text: '^fieldalignment: .*'

  # which dirs to exclude: issues from them won't be reported
  # default dirs are skipped independently of this option's value
  # (see exclude-dirs-use-default)
  # default: []
  exclude-dirs:
    - test/sdk/restapi
